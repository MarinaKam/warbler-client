(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(A,e){A.exports="data:image/jpeg;base64,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"},39:function(A,e,t){A.exports=t.p+"static/media/warbler-logo.25398cf7.png"},45:function(A,e,t){A.exports=t(83)},54:function(A,e,t){},83:function(A,e,t){"use strict";t.r(e);var a=t(0),n=t.n(a),r=t(19),s=t.n(r),c=t(5),o=(t(54),t(6)),i=t(9),l=t(10),u=t(12),m=t(11),p=t(13),d=t(38),E=t(24),h=t.n(E),b=function(A){return A?h.a.defaults.headers.common.Authorization="Bearer ".concat(A):delete h.a.defaults.headers.common.Authorization},f=function(A,e,t){return new Promise(function(a,n){return h.a[A.toLowerCase()](e,t).then(function(A){return a(A.data)}).catch(function(A){return n(A.response.data.error)})})},g=function(A){return{type:"ADD_ERROR",errors:A}},v=function(){return{type:"REMOVE_ERROR"}},j=function(A){return{type:"SET_CURRENT_USER",user:A}},O=t(39),U=t.n(O),R=function(A){function e(){var A,t;Object(i.a)(this,e);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=Object(u.a)(this,(A=Object(m.a)(e)).call.apply(A,[this].concat(n)))).logout=function(A){A.preventDefault(),t.props.logout()},t}return Object(p.a)(e,A),Object(l.a)(e,[{key:"render",value:function(){return n.a.createElement("nav",{className:"navbar navbar-expand"},n.a.createElement("div",{className:"container-fluid"},n.a.createElement("div",{className:"navbar-header"},n.a.createElement(o.b,{to:"/",className:"navbar-brand"},n.a.createElement("img",{src:U.a,alt:"Wabler Home"}))),this.props.currentUser.isAuthenticated?n.a.createElement("ul",{className:"nav navbar-nav navbar-right"},n.a.createElement("li",null,n.a.createElement(o.b,{to:"/users/".concat(this.props.currentUser.user.id,"/messages/new")},"New Message")),n.a.createElement("li",null,n.a.createElement("a",{href:!1,onClick:this.logout},"Log out"))):n.a.createElement("ul",{className:"nav navbar-nav navbar-right"},n.a.createElement("li",null,n.a.createElement(o.b,{to:"/signup"},"Sign up")),n.a.createElement("li",null,n.a.createElement(o.b,{to:"/signin"},"Log in")))))}}]),e}(a.Component),x=Object(c.b)(function(A){return{currentUser:A.currentUser}},{logout:function(){return function(A){localStorage.clear(),b(!1),A(j({}))}}})(R),w=t(16),M=t(41),y=t.n(M),N=t(22),H=t.n(N),z=function(A){var e=A.text,t=A.date,a=A.username,r=A.profileImageUrl,s=A.removeMessage,c=A.isCorrectUser;return n.a.createElement("div",{className:"list-group-item"},n.a.createElement("img",{src:r||H.a,className:"timeline-image",alt:a}),n.a.createElement("div",{className:"message-area"},n.a.createElement(o.b,{to:"/"}," ",a&&"@"+a," \xa0"),n.a.createElement("span",{className:"text-muted"},n.a.createElement(y.a,{className:"text-muted",format:"Do MMM YYYY"},t)),n.a.createElement("p",null,e),c&&n.a.createElement("a",{href:!1,className:"btn btn-danger",onClick:s},"Delete")))},T=function(A){function e(){return Object(i.a)(this,e),Object(u.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(p.a)(e,A),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.props.fetchMessages()}},{key:"render",value:function(){var A=this,e=this.props,t=e.messages,a=e.removeMessages,r=e.currentUser,s=t.map(function(e){var t=e._id,s=e.text,c=e.user,o=e.createAt;return n.a.createElement(z,{key:t,text:s,user:c,date:o,username:c&&c.username,profileImageUrl:c&&c.profileImageUrl,removeMessage:a.bind(A,c._id,t),isCorrectUser:r===c._id})});return console.log(t),n.a.createElement("div",{className:"row col-sm-8"},n.a.createElement("div",{className:"offset-1 col-sm-10"},n.a.createElement("div",{className:"list-group",id:"messages"},s)))}}]),e}(a.Component),P=Object(c.b)(function(A){return{messages:A.messages,currentUser:A.currentUser.user.id}},{fetchMessages:function(){return function(A){return f("GET","/api/messages").then(function(e){return A({type:"LOAD_MESSAGES",messages:e})}).catch(function(A){return g(A.message)})}},removeMessages:function(A,e){return function(t){return f("DELETE","/api/users/".concat(A,"/messages/").concat(e)).then(function(){return t({type:"REMOVE_MESSAGES",id:e})}).catch(function(A){return g(A.messages)})}}})(T),V=function(A){var e=A.profileImageUrl,t=A.username;return n.a.createElement("aside",{className:"col-sm-2"},n.a.createElement("div",{className:"panel panel-default"},n.a.createElement("div",{className:"panel-body"},n.a.createElement("img",{width:"200",height:"200",className:"img-thumbnail",src:e||H.a,alt:t}))))},B=function(A){var e=A.profileImageUrl,t=A.username;return n.a.createElement("div",{className:"row"},n.a.createElement(V,{profileImageUrl:e,username:t}),n.a.createElement(P,null))},Z=function(A){var e=A.currentUser;return e.isAuthenticated?n.a.createElement("div",null,n.a.createElement(B,{profileImageUrl:e.user.profileImageUrl,username:e.user.username})):n.a.createElement("div",{className:"home-hero"},n.a.createElement("h1",null,"What's Happening?"),n.a.createElement("h4",null,"New to Warbler?"),n.a.createElement(o.b,{to:"/signup",className:"btn btn-primary"},"Sign up here"))},D=t(23),X=function(A){function e(){var A,t;Object(i.a)(this,e);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=Object(u.a)(this,(A=Object(m.a)(e)).call.apply(A,[this].concat(n)))).state={email:"",username:"",password:"",profileImageUrl:""},t.handleSubmit=function(A){A.preventDefault();var e=t.props.signUp?"signup":"signin";t.props.onAuth(e,t.state).then(function(){return t.props.history.push("/")}).catch(function(){})},t.handleChange=function(A){t.setState(Object(D.a)({},A.target.name,A.target.value))},t}return Object(p.a)(e,A),Object(l.a)(e,[{key:"render",value:function(){var A=this.state,e=A.email,t=A.username,a=A.profileImageUrl,r=this.props,s=r.heading,c=r.btnText,o=r.signUp,i=r.errors,l=r.history,u=r.removeError;return l.listen(function(){return u()}),n.a.createElement("div",null,n.a.createElement("div",{className:"row justify-content-md-center text-center"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("h2",null,s),i.message&&n.a.createElement("div",{className:"alert alert-danger"},i.message),o&&n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"username"},"Username:"),n.a.createElement("input",{type:"text",id:"username",name:"username",className:"form-control",onChange:this.handleChange,value:t}),n.a.createElement("label",{htmlFor:"image-url"},"Image URL:"),n.a.createElement("input",{type:"text",name:"profileImageUrl",id:"image-url",className:"form-control",onChange:this.handleChange,value:a})),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"email"},"Email:"),n.a.createElement("input",{type:"text",id:"email",name:"email",className:"form-control",onChange:this.handleChange,value:e}),n.a.createElement("label",{htmlFor:"password"},"Password:"),n.a.createElement("input",{type:"password",name:"password",id:"password",className:"form-control",onChange:this.handleChange})),n.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block btn-lg mt-3"},c)))))}}]),e}(a.Component),Y=function(A){function e(){var A,t;Object(i.a)(this,e);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=Object(u.a)(this,(A=Object(m.a)(e)).call.apply(A,[this].concat(n)))).state={message:""},t.handleNewMessage=function(A){A.preventDefault(),t.props.postNewMessage(t.state.message),t.setState({message:""}),t.props.history.push("/")},t}return Object(p.a)(e,A),Object(l.a)(e,[{key:"render",value:function(){var A=this;return n.a.createElement("form",{onSubmit:this.handleNewMessage},this.props.errors.message&&n.a.createElement("div",{className:"alert alert-danger"},this.props.errors),n.a.createElement("input",{type:"text",className:"form-control",value:this.state.message,onChange:function(e){return A.setState({message:e.target.value})}}),n.a.createElement("button",{type:"submit",className:"btn btn-success pull-right"},"Add my message!"))}}]),e}(a.Component),W=Object(c.b)(function(A){return{errors:A.errors}},{postNewMessage:function(A){return function(e,t){var a=t().currentUser.user.id;return f("POST","/api/users/".concat(a,"/messages"),{text:A}).then(function(A){}).catch(function(A){return g(A.messages)})}}})(Y);function q(A){var e=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){!1===this.props.isAuthenticated&&this.props.history.push("/signin")}},{key:"componentWillUpdate",value:function(A,e,t){!1===A.isAuthenticated&&this.props.history.push("/signin")}},{key:"render",value:function(){return n.a.createElement(A,this.props)}}]),t}(a.Component);return Object(c.b)(function(A){return{isAuthenticated:A.currentUser.isAuthenticated}},null)(e)}var L=function(A){var e=A.location;return n.a.createElement("div",null,n.a.createElement("h3",null,"Sorry, page doesn't exist on path -  ",n.a.createElement("code",null,e.pathname)))},S=Object(w.e)(Object(c.b)(function(A){return{currentUser:A.currentUser,errors:A.errors}},{authUser:function(A,e){return function(t){return new Promise(function(a,n){return f("post","/api/auth/".concat(A),e).then(function(A){var e=A.token,n=Object(d.a)(A,["token"]);localStorage.setItem("jwtToken",e),b(e),t(j(n)),t({type:"REMOVE_ERROR"}),a()}).catch(function(A){t(g(A.message)),n()})})}},removeError:v})(function(A){var e=A.authUser,t=A.errors,a=A.removeError,r=A.currentUser;return n.a.createElement("div",{className:"container"},n.a.createElement(w.c,null,n.a.createElement(w.a,{exact:!0,path:"/",render:function(A){return n.a.createElement(Z,Object.assign({currentUser:r},A))}}),n.a.createElement(w.a,{exact:!0,path:"/signin",render:function(A){return n.a.createElement(X,Object.assign({removeError:a,errors:t,onAuth:e,btnText:"Log in",heading:"Welcome Back."},A))}}),n.a.createElement(w.a,{exact:!0,path:"/signup",render:function(A){return n.a.createElement(X,Object.assign({removeError:a,errors:t,signUp:!0,onAuth:e,btnText:"Sign me up!",heading:"Join Warbler today."},A))}}),n.a.createElement(w.a,{path:"/users/:id/messages/new",component:q(W)}),n.a.createElement(w.a,{component:L})))})),F=function(){return n.a.createElement(o.a,null,n.a.createElement("div",{className:"onboarding"},n.a.createElement(x,null),n.a.createElement(S,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=t(15),J={isAuthenticated:!1,user:{}},k=t(29),C=t(44),Q=Object(I.c)({currentUser:function(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;return"SET_CURRENT_USER"===e.type?{isAuthenticated:!!Object.keys(e.user).length,user:e.user}:A},errors:function(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:null},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_ERROR":return Object(k.a)({},A,{message:e.errors});case"REMOVE_ERROR":return Object(k.a)({},A,{message:null});default:return A}},messages:function(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOAD_MESSAGES":return Object(C.a)(e.messages);case"REMOVE_MESSAGES":return A.filter(function(A){return A._id!==e.id});default:return A}}}),G=t(42);var K,_=t(43),$=t.n(_),AA=Object(I.e)(Q,Object(I.d)(Object(I.a)(G.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));if(localStorage.jwtToken){K=localStorage.jwtToken,b(K);try{AA.dispatch(j($()(localStorage.jwtToken)))}catch(eA){AA.dispatch(j({}))}}s.a.render(n.a.createElement(c.a,{store:AA},n.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(A){A.unregister()})}},[[45,1,2]]]);
//# sourceMappingURL=main.01cdfe14.chunk.js.map